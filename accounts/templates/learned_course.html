{% extends 'learn/base.html' %}

{% block content %}
<div class="container">
    <div class="profile-bg ">
        <div class="flex-1 mb-4 d-flex align-items-center">

                <img class="rounded-circle" style="width:6rem; height:6rem" src="/media/{{ user.avatar }}">
                <h3 class="pl-3 mb-0">{{ user.username }}</h3>
        </div>
        <div class="d-flex flex-column mb-0 text-right">
            <h4 class="mb-0 text-secondary text-center">{{ learned_course_num }}</h4>
            <h6 class="mb-0 text-secondary">Courses</h6>
        </div>
    </div>
    <hr class="mt-0">
    <h2 class="mt-5">已学课程</h2>
    <div>
    {% for each_course in all_learned_courses %} {% if forloop.counter0|divisibleby:3 %}
    </div>
    <div class="row">
        <div class="col-md-4">
            <a class="card no-radius link-hover" href="{{ each_course.get_absolute_url }}">
                <img class="card-img-top">
                <div class="card-body ">
                    <h3 class="card-title">{{each_course.course_name}}</h3>
                    <div class="card-text course-brief">{{each_course.brief}}</div>
                    <!-- <p class="card-text">
                        {% autoescape off %} {{each_course.overview|truncatewords:"1"}} {% endautoescape %}
                    </p> -->
                </div>
            </a>
        </div>

        {% else %}
        <div class="col-md-4">
            <a class="card no-radius link-hover" href="{{ each_course.get_absolute_url }}">
                <img class="card-img-top">
                <div class="card-body">
                    <h3 class="card-title">{{each_course.course_name}}</h3>
                    <div class="card-text course-brief">{{each_course.brief}}</div>

                    <!-- <p class="card-text">{% autoescape off %}{{each_course.overview|truncatewords:"1"}}{% endautoescape %}</p> -->
                </div>
            </a>
        </div>
        {% endif %} {% endfor %}
    <!---->
        <div class="col-md-4">
            <a class="card no-radius link-hover" href="{% url 'learn' %}">
                <img class="card-img-top">
                <div class="card-body d-flex align-items-center justify-content-center">
                    <p class="card-text align-middle text-grey">+ 添加更多课程</p>

                    <!-- <p class="card-text">{% autoescape off %}{{each_course.overview|truncatewords:"1"}}{% endautoescape %}</p> -->
                </div>
            </a>
        </div>

    </div>
    <script src="/static/js/text-overflow.js"></script>

</div>
{% endblock %}